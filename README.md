# Xilinx DPU with DART IPs

This repos recreates a Vivado design with Xilinx DPU CNN accelerator and DART IPs for dynamic partial reconfiguration (DPR). The DPU is configured with one core and DART with one reconfigurable region with a black-box IP called `acc`. In runtime, the  black-box IP will be replaced by the [`sum_vec` IP](https://github.com/fred-framework/dart_ips/tree/master/ips/sum_vec). Thus, this repository corresponds only to the static part of the DPR design.

## Requirements

This script is assuming Linux operation system (Ubuntu 18.04), Vivado 2020.2, and Vitis AI 1.3.1. The target board is the ZCU102.

## How to run it

First, you need to build the IPS `DPUCZDX8G_v3_3_0` and  DART `acc`. The IP `DPUCZDX8G_v3_3_0` is present in this [repository](https://github.com/Xilinx/Vitis-AI/tree/1.3.1/dsa/DPU-TRD/dpu_ip/DPUCZDX8G_v3_3_0). Double check the correct reposity version. DART `acc` IP is generated by DART when running a design for ZCU102. The IP will be located in the directory `Sources/ip_repo`, under DART project directory.

Next, in the directory `hw/ips`, create a symbolic link for the `DPUCZDX8G_v3_3_0` IP and another for DART `acc`.

Finally, run:

```
$ source /opt/Xilinx/Vivado/2020.2/settings64.sh
$ vivado -mode batch -source build.tcl
```

This script will recreate the entire Vivado project, the main block design, execute the synthesis, and export the synthesis DCP file in the current directory.

## Authors

 - Alexandre Amory (January 2022), ReTiS Lab, Scuola Sant'Anna, Pisa, Italy.

## Funding
 
This software package has been developed in the context of the [AMPERE project](https://ampere-euproject.eu/). This project has received funding from the European Unionâ€™s Horizon 2020 research and innovation programme under grant agreement No 871669.
